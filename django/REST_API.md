# REST API

### 사전 지식

#### HTTP

- hypertext transfer protocol
- html  과 같은 문서들 리소스(자원, resource)들을 가져올수 있도록 하는 프로토콜 규칙
- 데이터 교환의 기초
- 클라이언트-서버 프로토콜 이라고도 부른다. 
- 요청(request)
- 응답(response)

##### 특징

- statele(무상태)
  - 두 요청 사이에 링크가 없다.
  - 요청을 보내면 끊고 응답을 보내면 끊는다. 
  - 상태 정보가 유지되지 않음 
  - 이것때문에 REST API가 나오게 된것! 
  - 특정페이지와 일관되게 상호작용하려는 사용자에게 문제될 수있다. 
    - 이커머스에서 장바구니를 사용하는 경우 
    - 이를 해결하기 위해 쿠키와 세션 이용해서 서버 상태와 요청을 연결하도록 한다. 
- HTTP Request(요청) Methods
  - 리소스에 대한 행위를 정의
  - 리소스에 대해 수행할 원하는 작업을 나타내는 메서드 모음을 정의
  -  HTTP Method  예시
    - GET , POST, PUT , DELETE
- GET
  - 서버에 리소스 표현을 요청 
  - 검색에만 사용
- POST
  - 데이터를 지정된 리소스에 제출(submit)한다
  - 서버의 상태를 변경 
- PUT
  - 요청한 주소의 리소스를 수정
- DELETE
  - 지정된 리소스를 삭제 

- status codes
  - 200: 성공
  - 300-399 : redirect 호출할때 
  - client error : 404/403
  - server error: 500

#### 웹 식별 identifying

- 웹에서 리소스를 식별하는 방법
- 리소스를 식별하기 위해 **URI**로 식별됨 

#### URI

- 통합 자원 식별자

-  Uniform Resource Identifier

- 인터넷에서 하나의 리소스를 가리키는 문자열 

- 가장 일반적인 URI는 웹 주소로 알려진 URL

  

##### URN

- 특정 이름 공간에서 이름으로 리소스를 식별하는 URI
- 민증같은거 도서건 시각 자료건 식별하는 번호를 줌 
- URL과 달리 자원 위치에 영향을 받지 않는 유일한 이름 역할을 함 독립적인 이름
- URL 단점을 극복하기 위해 등장햇는데, 실제 리소스를 찾는 방법은 보편화 되지않았다.. 현재는 URL을 대부분 사용 
- 고유한 이름으로 자원을 식별 

##### URL (중요)

- uniform resource locator 통합 자원 위치

- 웹에서 주어진 리소스의 주소

- 네트워크 상에 리소스가 어디있는지 주소를 알려주기 위한 약속 

- 여러부분 구성, 일부는 필수, 나머지는 선택사항 

- 자원의 위치로 자원으 식별 

  ##### scheme(or protocol)

  - 브라우저가 리소스를 요청하는데 사용해야하는 프로토콜 
  - mailto : 메일 열기위한
  -  ftp: 파일 전송 프로토콜

  ##### Authority

  - 도메인과 포트로 포함되며 둘은 :(콜론)으로 구분된다
  - :// 다음 
  - domain name 
    - 요청중인 웹 서버를 나타낸다.
    - 어떤 웹 서버가 요구 되는 지를 가리키며 직접 ip 주소를 사용하는것도 가능하다.  하지만 사람이 외우기 어렵기때문에 도메인 네임으로 사용
  - port 
    - 웹 서버 리소스에 접근하는데 사용되는 기술적인 문(gate)
    - 표준 포트는 다음과 같고 애네는 생략 가능(나머지는 생략 불가능)- 별도로 쓸일 없다!
      - http-80
      - https-443
    - 장고 8000(80+00)
  - path(여기부터는 선택)
    - 웹 서버의 리소스 경로
    - 지금은 추상화 형태로 구조를 표현한다
    - 예를 들어 /articles / create / 가 실제 articles 폴더 안에 create 폴더 안을 나타내는것은 아니다. 
  - parameters
    - 웹 서버에 제공하는 추가적인 데이터 
    - & 기호로 구분되는 key-value 쌍 목록
    - get 방식: 요청할 때 전달하는 값 , get 요청 일때  
    - 서버는 리소스를 응답하기 전에 이러한 파라미터를 사용하여 추가 작업을 수행할 수 있음
  - Anchor
    - 특정 위치로 이동하고 싶을때
    - 북마크 
    - 리소스의 다른 부분에 대한 앵커 
    - 북마크 지점에 있는 콘텐츠를 표시 
    - 부분 식별자 # , 서버에 전송되지 않음 
    - 하이퍼 링크와 비슷한 기능을 하는 인터넷 상의 다른 문서와 연결된 문자 혹은 그림

### API

- 애플리케이션과 프로그래밍으로 소통하는 방법
- 프로그래밍 언어로서 소통
- 간단한 계약 인터페이스라고 볼수 있음. 
- 직접 배선을 하지 않는다는 것 
- 직접배선하면 매우 위험하고 비효율적이다. 
- 서로다른 환경에서 프로그램끼리 프로그래밍으로 소통하는 방법이다. 
- 서로다른 환경에서 프로그램을 개발하기 위한 인터페이스

#### Web API

- 웹 서버 또는 웹 브라우저를 위한API
- 현재 웹 개발은 모든 것을 하나부터 열까지 직접 개발하기 보다 여러 OPEN API를 활용하는 추세 

- API은 다양한 타입의 데이터를 응답
  - HTML, XML , JSON(중요)

### REST

- Representational state transter
- 표현
- api 서버를 개발하기 위한 일종의 소프트 웨어 설계 방법론 
- 하나의 아키텍쳐 : 이렇게 설계하면 효율적이더라~ 
- 규약은 아님 
- rest 원리를 따르는 시스템을 RESTful 하다고 부름 
- REST 의 기본 아이디어는 리소스 측 자원
  - 자원을 정의하고 자원에 대한 주소를 지정하는 전반적인 방법을 서술

- **그럼 어떻게 자원을 정의하고 주소를 지정하나요?**
  - 자원의 식별 :URI
  - 자원의 행위 :HTTP Method
  - 자원의 표현 :json으로 표현된 데이터를 제공한다. 

### JSON

- 자바스크립트 표기법을 따른 단순 문자열
- key-value 형태의 구조를 갖고 있음
- 형변환해서 사용해야한다. 파이썬 DICT <-> JSON 서로 형변환 필요. 형태만 똑같고 전혀 다르다.  
- 사람이 읽고 쓰기 쉽고, 기계가 파싱 해석 분석 하고 만들어 내기 쉽기 때문에 현재 api에서 가장 많이 사용하는 데이터 타입 

#### Response Json

- JSON 형태로 서버 응답 변화

- 다양한 방법의 JSON 

- 서버가 응답하는것

  - 지금까지는 페이지만 응답하고 있었음

  - 하지만 사실 서버가 응답할 수 있는것은 페이지 뿐만 아니라 다양한 데이터 타입을 응답할 수 있음 

    

REST API : rest 아키텍처를 를 따르는 api를 REST API라고 한다. 

#### JSON 응답

1. HTML 응답
2. JSONRESPONSEN
3. serializer
4. rest framework 이용

#### 보충

장고 서버

- 이제 응답코드들도 자세히 봐야한다.
  - 응답 결과에 따라서 화면을 랜더링 
- restful 하다 
  - post , put, delete, get 지켰다.
  - 누구든지 쉽게 구현할수있게 만들기 위해서  
- rest.api 

json

- 문자열
- 다만 체계적이고 데이터가 규격화 되어있어서 다른 서버에서 뭔가 불러올때 데이터가 json이면 파싱하기가 편리하다는 것 

#### serializer

- 모든 사용자가 넘기는 데이터는 다 틀리다 라는 가정을 해야함 . 
- 유효성 검사는 필수사항

### 시험

view.py

- get_object_or_404(Article)

- get_list_or_404(Article)

- raise_exception = True 
- many= True ->  리스트를 반환할수 있다.
- @api_view(['GET,POST'])
- data = request.data

serializer.py - 사용법을 익혀라! 

- comment_set :갑자기 왜 나오지? 

  